# Load Server Code Meta

[//]: types.ts '<-- Autogenerated By (do not edit the following markdown directly)'

## API Reference

### createLoadServerCodeMeta

Creates a loadCodeMeta function that resolves variant paths from demo files.

This factory function creates a LoadCodeMeta implementation that:

1. Parses the demo file to find createDemo calls with variants
2. Resolves all variant entry point paths using resolveVariantPaths
3. Returns a Code object mapping variant names to their resolved file URLs

The actual loading, parsing, and transformation of the variants is handled
elsewhere by the CodeHighlighter component using loadCodeVariant.

**Parameters:**

| Parameter  | Type                        | Default | Description |
| :--------- | :-------------------------- | :------ | :---------- |
| \_options? | `CreateLoadCodeMetaOptions` | -       | -           |

**Return Value:**

LoadCodeMeta function that takes a URL and returns Promise<Code>

```tsx
type ReturnValue = (url: string) => Promise<Code>;
```

### DirectoryReader

**Parameters:**

| Parameter | Type     | Default | Description |
| :-------- | :------- | :------ | :---------- |
| path      | `string` | -       | -           |

**Return Value:**

```tsx
type ReturnValue = Promise<DirectoryEntry[]>;
```

### loadServerCodeMeta

Default loadServerCodeMeta function that resolves variant paths from demo files.
This function is used to load code metadata for demos, specifically resolving paths for variants defined in the demo files.
It reads the demo file, parses it to find `createDemo` calls with variants, and resolves the paths for those variants.
It returns a Code object mapping variant names to their resolved file URLs.

**Parameters:**

| Parameter | Type     | Default | Description |
| :-------- | :------- | :------ | :---------- |
| url       | `string` | -       | -           |

**Return Value:**

```tsx
type ReturnValue = Promise<Code>;
```

### resolveImportResultWithFs

Resolves import result by separating JavaScript modules from static assets,
only resolving JavaScript modules and returning a combined map.
This is a convenience wrapper around the generic resolveImportResult function
that uses Node.js filesystem APIs.

**Parameters:**

| Parameter    | Type                                                                                                                       | Default | Description                                         |
| :----------- | :------------------------------------------------------------------------------------------------------------------------- | :------ | :-------------------------------------------------- |
| importResult | `Record<string, { url: string; names: string[]; includeTypeDefs?: true; positions?: ({ start: number; end: number })[] }>` | -       | The result from parseImports containing all imports |
| options?     | `ResolveModulePathOptions`                                                                                                 | -       | Configuration options for module resolution         |

**Return Value:**

Promise\<Map\<string, string>> - Map from import path to resolved file path

```tsx
type ReturnValue = Promise<Map<string, string>>;
```

### resolveModulePathsWithFs

Resolves multiple module paths using Node.js filesystem APIs.
This is a convenience wrapper around the generic resolveModulePaths function.

**Parameters:**

| Parameter  | Type                       | Default | Description           |
| :--------- | :------------------------- | :------ | :-------------------- |
| moduleUrls | `string[]`                 | -       | -                     |
| options?   | `ResolveModulePathOptions` | -       | Configuration options |

**Return Value:**

Promise\<Map\<string, string>> - Map from input path to resolved file path

```tsx
type ReturnValue = Promise<Map<string, string>>;
```

### resolveModulePathWithFs

Resolves a module path using Node.js filesystem APIs.
This is a convenience wrapper around the generic resolveModulePath function.

**Parameters:**

| Parameter  | Type                       | Default | Description                                         |
| :--------- | :------------------------- | :------ | :-------------------------------------------------- |
| modulePath | `string`                   | -       | The module path to resolve (without file extension) |
| options?   | `ResolveModulePathOptions` | -       | Configuration options                               |

**Return Value:**

Promise\<string | TypeAwareResolveResult> - The resolved file path(s), or throws if not found

```tsx
type ReturnValue = Promise<string>;
```

### resolveVariantPathsWithFs

Resolves variant paths from a variants object mapping variant names to their file paths.
This is a convenience wrapper around the generic resolveVariantPaths function
that uses Node.js filesystem APIs.

**Parameters:**

| Parameter | Type                       | Default | Description                                      |
| :-------- | :------------------------- | :------ | :----------------------------------------------- |
| variants  | `Record<string, string>`   | -       | Object mapping variant names to their file paths |
| options?  | `ResolveModulePathOptions` | -       | Configuration options for module resolution      |

**Return Value:**

Promise\<Map\<string, string>> - Map from variant name to resolved file URL

```tsx
type ReturnValue = Promise<Map<string, string>>;
```

## Additional Types

### CreateLoadCodeMetaOptions

```typescript
type CreateLoadCodeMetaOptions = {};
```

### DirectoryEntry

```typescript
type DirectoryEntry = { name: string; isFile: boolean; isDirectory: boolean };
```

### ResolveModulePathOptions

```typescript
type ResolveModulePathOptions = { extensions?: string[] };
```

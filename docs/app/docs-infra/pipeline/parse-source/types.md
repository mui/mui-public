# Parse Source

[//]: types.ts '<-- Autogenerated By (do not edit the following markdown directly), run: pnpm docs:validate docs-infra/pipeline/parse-source'

## API Reference

### createParseSource

Initializes Starry Night and returns a configured `parseSource` function.
This only needs to be called once per application. The Starry Night instance
is stored globally for reuse across calls.

**Return Value:**

A Promise that resolves to the initialized `parseSource` function

```tsx
type ReturnValue = Promise<ParseSource>;
```

### getGrammarFromLanguage

Gets the grammar scope from a language name.

**Parameters:**

| Parameter | Type     | Default | Description                                          |
| :-------- | :------- | :------ | :--------------------------------------------------- |
| language  | `string` | -       | The language name (e.g., 'tsx', 'css', 'typescript') |

**Return Value:**

The grammar scope or undefined if not recognized

```tsx
type ReturnValue = string | undefined;
```

### parseSource

Parses source code into a HAST tree with syntax highlighting.

**Parameters:**

| Parameter | Type     | Default | Description |
| :-------- | :------- | :------ | :---------- |
| source    | `string` | -       | -           |
| fileName  | `string` | -       | -           |
| language? | `string` | -       | -           |

**Return Value:**

HAST Root node containing highlighted code structure with line gutters

```tsx
type ReturnValue = HastRoot;
```

## Additional Types

### extensionMap

```typescript
type extensionMap = Record<string, string>;
```

### languageToGrammarMap

Maps simplified language names back to grammar scope names.
Used when `language` prop is provided instead of fileName.

```typescript
type languageToGrammarMap = Record<string, string>;
```

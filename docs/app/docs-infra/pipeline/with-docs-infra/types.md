# With Docs Infra

[//]: types.ts '<-- Autogenerated By (do not edit the following markdown directly), run: pnpm docs:validate docs-infra/pipeline/with-docs-infra'

## API Reference

### getDocsInfraMdxOptions

Get default MDX options for docs-infra

**Parameters:**

| Parameter      | Type                  | Default | Description |
| :------------- | :-------------------- | :------ | :---------- |
| customOptions? | `DocsInfraMdxOptions` | -       | -           |

**Return Value:**

| Property                    | Type                                                                | Description                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| :-------------------------- | :------------------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `remarkPlugins`             | `(string \| [string, any])[] \| undefined`                          | -                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `rehypePlugins`             | `(string \| [string, any])[] \| undefined`                          | -                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `additionalRemarkPlugins`   | `(string \| [string, any])[] \| undefined`                          | Additional remark plugins to add to the default docs-infra plugins                                                                                                                                                                                                                                                                                                                                                                                      |
| `additionalRehypePlugins`   | `(string \| [string, any])[] \| undefined`                          | Additional rehype plugins to add to the default docs-infra plugins                                                                                                                                                                                                                                                                                                                                                                                      |
| `extractToIndex`            | `boolean \| { include: string[]; exclude: string[] } \| undefin...` | Whether to automatically extract page metadata (title, description, headings) from MDX files&#xA;and maintain an index in the parent directory's page.mdx file. Index files themselves (e.g., pattern/page.mdx) are automatically excluded from extraction. Can be: `false` - Disabled`true` - Enabled with default filter: `{ include: ['app', 'src/app'], exclude: [] }``{ include: string[], exclude: string[] }` - Enabled with custom path filters |
| `baseDir`                   | `string \| undefined`                                               | Base directory for path filtering. Defaults to process.cwd().&#xA;Only needed when calling the plugin directly (not via withDocsInfra).                                                                                                                                                                                                                                                                                                                 |
| `errorIfIndexOutOfDate`     | `boolean \| undefined`                                              | Throw an error if any index is out of date or missing.&#xA;Useful for CI environments to ensure indexes are committed.                                                                                                                                                                                                                                                                                                                                  |
| `defaultInlineCodeLanguage` | `string \| false \| undefined`                                      | Default language for inline code syntax highlighting.&#xA;Set to `false` to disable default highlighting for inline code.                                                                                                                                                                                                                                                                                                                               |

### withDeploymentConfig

**Parameters:**

| Parameter  | Type         | Default | Description |
| :--------- | :----------- | :------ | :---------- |
| nextConfig | `NextConfig` | -       | -           |

**Return Value:**

```tsx
type ReturnValue = NextConfig;
```

### withDocsInfra

Next.js plugin for MUI docs infrastructure.
Configures webpack loaders, turbopack rules for docs sites.
Use getDocsInfraMdxOptions() with createMDX for MDX integration.

**Parameters:**

| Parameter | Type                   | Default | Description |
| :-------- | :--------------------- | :------ | :---------- |
| options?  | `WithDocsInfraOptions` | -       | -           |

**Return Value:**

```tsx
type ReturnValue = (nextConfig?: NextConfig) => NextConfig;
```

## Additional Types

### DocsInfraMdxOptions

```typescript
type DocsInfraMdxOptions = {
  remarkPlugins?: (string | [string, any])[];
  rehypePlugins?: (string | [string, any])[];
  additionalRemarkPlugins?: (string | [string, any])[];
  additionalRehypePlugins?: (string | [string, any])[];
  extractToIndex?: boolean | { include: string[]; exclude: string[] };
  baseDir?: string;
  errorIfIndexOutOfDate?: boolean;
  defaultInlineCodeLanguage?: string | false;
};
```

### WebpackOptions

```typescript
type WebpackOptions = {
  buildId: string;
  dev: boolean;
  isServer: boolean;
  nextRuntime?: 'nodejs' | 'edge';
  config: NextConfig;
  defaultLoaders: { babel: RuleSetRule };
};
```

### WithDocsInfraOptions

```typescript
type WithDocsInfraOptions = {
  additionalPageExtensions?: string[];
  enableExportOutput?: boolean;
  demoPathPattern?: string;
  clientDemoPathPattern?: string;
  additionalDemoPatterns?: { index?: string[]; client?: string[] };
  additionalTurbopackRules?: Record<string, { loaders: string[] }>;
  performance?: { logging: boolean; notableMs?: number; showWrapperMeasures?: boolean };
  deferCodeParsing?: 'gzip' | 'json' | 'none';
  removeCommentsWithPrefix?: string[];
  notableCommentsPrefix?: string[];
  typesIndexFileName?: string;
  errorIfTypesIndexOutOfDate?: boolean;
};
```

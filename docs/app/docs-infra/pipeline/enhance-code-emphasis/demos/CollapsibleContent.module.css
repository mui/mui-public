.container {
  border: 1px solid #d0cdd7;
  border-radius: 8px;
  overflow: hidden;
}

.code {
  padding: 10px 6px;
}

/* Visually hidden but accessible checkbox â€” provides toggle state without JS */
.checkbox {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip-path: inset(50%);
  white-space: nowrap;
  border: 0;
}

.toggle {
  display: block;
  width: 100%;
  padding: 6px;
  border: none;
  border-top: 1px solid #d0cdd7;
  background: #f5f3f8;
  color: #65636d;
  cursor: pointer;
  font-size: 12px;
  font-family: var(--font-geist-mono);
  text-align: center;
}

.toggle:hover {
  background: #eae7ef;
}

/* Show focus ring on toggle when checkbox receives keyboard focus */
.checkbox:focus-visible ~ .toggle {
  outline: 2px solid #8b5cf6;
  outline-offset: -2px;
}

/* Toggle label text based on checkbox state */
.collapseLabel {
  display: none;
}

.checkbox:checked ~ .toggle .expandLabel {
  display: none;
}

.checkbox:checked ~ .toggle .collapseLabel {
  display: inline;
}

/* Pre element */
.codeBlock {
  margin: 0;
  padding: 6px;
  overflow-x: auto;
}

/* Frame can contain multiple lines */
.codeBlock :global(.frame) {
  display: block;
}

.codeBlock :global(.frame[data-lined]) {
  display: block;
  white-space: normal;
}

.codeBlock :global(.frame[data-lined] .line) {
  display: block;
  white-space: pre;
}

/* Highlighted line styling */
.codeBlock :global(.line[data-hl]) {
  background: #ebe4ff;
  margin: 0 -6px;
  padding: 0 6px;
}

.codeBlock :global(.line[data-hl-position='single']) {
  border-radius: 8px;
}

.codeBlock :global(.line[data-hl-position='start']) {
  border-top-left-radius: 8px;
  border-top-right-radius: 8px;
}

.codeBlock :global(.line[data-hl-position='end']) {
  border-bottom-left-radius: 8px;
  border-bottom-right-radius: 8px;
}

/* ---- Collapsible frame behavior ---- */

/* Normal frames and unfocused highlighted frames are hidden by default (collapsed) */
.codeBlock :global(.frame:not([data-frame-type])),
.codeBlock :global(.frame[data-frame-type='highlighted-unfocused']) {
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition:
    max-height 0.3s ease,
    opacity 0.3s ease;
}

/* Padding frames appear dimmed when collapsed */
.codeBlock :global(.frame[data-frame-type='padding-top']),
.codeBlock :global(.frame[data-frame-type='padding-bottom']) {
  opacity: 0.5;
  transition: opacity 0.3s ease;
}

/* When checkbox is checked (expanded), show all frames */
.checkbox:checked ~ .code .codeBlock :global(.frame:not([data-frame-type])),
.checkbox:checked ~ .code .codeBlock :global(.frame[data-frame-type='highlighted-unfocused']) {
  max-height: 500px;
  overflow: visible;
  opacity: 1;
}

.checkbox:checked ~ .code .codeBlock :global(.frame[data-frame-type='padding-top']),
.checkbox:checked ~ .code .codeBlock :global(.frame[data-frame-type='padding-bottom']) {
  opacity: 1;
}

# Use Demo

[//]: types.ts '<-- Autogenerated By (do not edit the following markdown directly), run: pnpm docs:validate docs-infra/hooks/use-demo'

## API Reference

### addHiddenInput

Helper to create HTML form element with hidden inputs

**Parameters:**

| Parameter | Type              | Default | Description |
| :-------- | :---------------- | :------ | :---------- |
| form      | `HTMLFormElement` | -       | -           |
| name      | `string`          | -       | -           |
| value     | `string`          | -       | -           |

**Return Value:**

```tsx
type ReturnValue = void;
```

### createCodeSandbox

Utility function for creating CodeSandbox demos
Returns the configuration that can be used with openWithForm

**Parameters:**

| Parameter | Type                                                   | Default | Description |
| :-------- | :----------------------------------------------------- | :------ | :---------- |
| \_\_0     | `{ flattenedFiles: FlattenedFiles; rootFile: string }` | -       | -           |

**Return Value:**

| Property   | Type                     | Description |
| :--------- | :----------------------- | :---------- |
| `url`      | `string`                 | -           |
| `formData` | `Record<string, string>` | -           |

### createStackBlitz

Create StackBlitz configuration for use with openWithForm

**Parameters:**

| Parameter | Type                                                                                       | Default | Description |
| :-------- | :----------------------------------------------------------------------------------------- | :------ | :---------- |
| \_\_0     | `{ title: string; description: string; flattenedFiles: FlattenedFiles; rootFile: string }` | -       | -           |

**Return Value:**

| Property   | Type                     | Description |
| :--------- | :----------------------- | :---------- |
| `url`      | `string`                 | -           |
| `formData` | `Record<string, string>` | -           |

### defaultHtmlTemplate

Default HTML template function for Vite-based demos

**Parameters:**

| Parameter | Type                                                                                           | Default | Description |
| :-------- | :--------------------------------------------------------------------------------------------- | :------ | :---------- |
| \_\_0     | `{ language: string; title: string; description: string; head?: string; entrypoint?: string }` | -       | -           |

**Return Value:**

```tsx
type ReturnValue = string;
```

### exportVariant

Export a variant as a standalone project with metadata files properly scoped

**Parameters:**

| Parameter   | Type           | Default | Description |
| :---------- | :------------- | :------ | :---------- |
| variantCode | `VariantCode`  | -       | -           |
| config?     | `ExportConfig` | -       | -           |

**Return Value:**

| Property   | Type          | Description |
| :--------- | :------------ | :---------- |
| `exported` | `VariantCode` | -           |
| `rootFile` | `string`      | -           |

### exportVariantAsCra

Export a VariantCode as a Create React App template
Returns an object with the exported VariantCode and entrypoint path

**Parameters:**

| Parameter   | Type                                                                    | Default | Description |
| :---------- | :---------------------------------------------------------------------- | :------ | :---------- |
| variantCode | `VariantCode`                                                           | -       | -           |
| config?     | `Omit<ExportConfig, 'viteConfig' \| 'packageType' \| 'htmlSkipJsLink'>` | -       | -           |

**Return Value:**

| Property   | Type          | Description |
| :--------- | :------------ | :---------- |
| `exported` | `VariantCode` | -           |
| `rootFile` | `string`      | -           |

### flattenCodeVariant

Flatten a VariantCode into a flat files structure
Resolves relative paths and handles metadata file scoping
Uses addPathsToVariant for path resolution logic

**Parameters:**

| Parameter | Type          | Default | Description |
| :-------- | :------------ | :------ | :---------- |
| variant   | `VariantCode` | -       | -           |

**Return Value:**

```tsx
type ReturnValue = FlattenedFiles;
```

### generateEntrypointFilename

Generate a unique entrypoint filename that doesn't conflict with existing files

**Parameters:**

| Parameter      | Type                  | Default | Description |
| :------------- | :-------------------- | :------ | :---------- |
| existingFiles  | `VariantExtraFiles`   | -       | -           |
| sourceFilename | `string \| undefined` | -       | -           |
| useTypescript  | `boolean`             | -       | -           |
| pathPrefix?    | `string`              | `""`    | -           |

**Return Value:**

```tsx
type ReturnValue = string;
```

### getFilenameFromVariant

Extract filename from URL or return undefined if not available

**Parameters:**

| Parameter   | Type          | Default | Description |
| :---------- | :------------ | :------ | :---------- |
| variantCode | `VariantCode` | -       | -           |

**Return Value:**

```tsx
type ReturnValue = string | undefined;
```

### getRelativeImportPath

Generate the relative import path from entrypoint to source file

**Parameters:**

| Parameter      | Type                  | Default | Description |
| :------------- | :-------------------- | :------ | :---------- |
| sourceFilename | `string \| undefined` | -       | -           |

**Return Value:**

```tsx
type ReturnValue = string;
```

### openWithForm

Generic function to create and submit a form for opening online demo platforms
This function creates HTML elements and should be used in browser contexts

**Parameters:**

| Parameter | Type                                                                                  | Default | Description |
| :-------- | :------------------------------------------------------------------------------------ | :------ | :---------- |
| \_\_0     | `{ url: string; formData: Record<string, string>; method?: string; target?: string }` | -       | -           |

**Return Value:**

```tsx
type ReturnValue = void;
```

### useDemo

**useDemo Parameters:**

| Parameter    | Type               | Default | Description |
| :----------- | :----------------- | :------ | :---------- |
| contentProps | `ContentProps<{}>` | -       | -           |
| opts         | `UseDemoOpts`      | -       | -           |

**useDemo Return Value:**

| Property            | Type                                                                                                                             | Description |
| :------------------ | :------------------------------------------------------------------------------------------------------------------------------- | :---------- |
| component           | `string \| number \| bigint \| true \| ReactElement \| Iterable<React.ReactNode, any, any> \| Promise<AwaitedReactNode> \| null` | -           |
| ref                 | `React.RefObject<HTMLDivElement \| null>`                                                                                        | -           |
| resetFocus          | `(() => void)`                                                                                                                   | -           |
| openStackBlitz      | `(() => void)`                                                                                                                   | -           |
| openCodeSandbox     | `(() => void)`                                                                                                                   | -           |
| name                | `string \| undefined`                                                                                                            | -           |
| slug                | `string \| undefined`                                                                                                            | -           |
| variants            | `string[]`                                                                                                                       | -           |
| selectedVariant     | `string`                                                                                                                         | -           |
| selectVariant       | `((variant: string \| null) => void)`                                                                                            | -           |
| files               | `({ name: string; slug?: string; component: React.ReactNode })[]`                                                                | -           |
| selectedFile        | `React.ReactNode`                                                                                                                | -           |
| selectedFileLines   | `number`                                                                                                                         | -           |
| selectedFileName    | `string \| undefined`                                                                                                            | -           |
| selectFileName      | `((fileName: string) => void)`                                                                                                   | -           |
| allFilesSlugs       | `({ fileName: string; slug: string; variantName: string })[]`                                                                    | -           |
| expanded            | `boolean`                                                                                                                        | -           |
| expand              | `(() => void)`                                                                                                                   | -           |
| setExpanded         | `((expanded: boolean) => void)`                                                                                                  | -           |
| copy                | `((event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => Promise<void>)`                                                    | -           |
| availableTransforms | `string[]`                                                                                                                       | -           |
| selectedTransform   | `string \| null \| undefined`                                                                                                    | -           |
| selectTransform     | `((transformName: string \| null) => void)`                                                                                      | -           |
| setSource           | `((source: string) => void) \| undefined`                                                                                        | -           |
| userProps           | `UserProps<{}>`                                                                                                                  | -           |

## Additional Types

### ExportConfig

```typescript
type ExportConfig = {
  title?: string;
  titlePrefix?: string;
  titleSuffix?: string;
  description?: string;
  descriptionPrefix?: string;
  descriptionSuffix?: string;
  variantName?: string;
  language?: string;
  htmlPrefix?: string;
  assetPrefix?: string;
  sourcePrefix?: string;
  htmlTemplate?: (params: {
    language: string;
    title: string;
    description: string;
    head?: string;
    entrypoint?: string;
    variant?: VariantCode;
    variantName?: string;
  }) => string;
  headTemplate?: (params: {
    sourcePrefix: string;
    assetPrefix: string;
    variant?: VariantCode;
    variantName?: string;
  }) => string;
  rootIndexTemplate?: (params: { importString: string; useTypescript: boolean }) => string;
  dependencies?: Record<string, string>;
  devDependencies?: Record<string, string>;
  scripts?: Record<string, string>;
  packageType?: 'module' | 'commonjs';
  packageJsonFields?: Record<string, any>;
  tsconfigOptions?: Record<string, any>;
  viteConfig?: Record<string, any>;
  useTypescript?: boolean;
  extraMetadataFiles?: Record<string, { source: string }>;
  frameworkHandlesEntrypoint?: boolean;
  htmlSkipJsLink?: boolean;
  frameworkFiles?: { variant?: VariantCode; globals?: VariantExtraFiles };
  exportFunction?: (
    variantCode: VariantCode,
    config: ExportConfig,
  ) => { exported: VariantCode; rootFile: string };
  transformVariant?: (
    variant: VariantCode,
    variantName?: string,
    globals?: VariantExtraFiles,
  ) => { variant?: VariantCode; globals?: VariantExtraFiles } | undefined;
  versions?: Record<string, string>;
  resolveDependencies?: (
    packageName: string,
    envVars?: Record<string, string>,
  ) => Record<string, string>;
};
```

### FlatFile

```typescript
type FlatFile = { source: string; metadata?: boolean };
```

### FlattenedFiles

```typescript
type FlattenedFiles = { [filePath: string]: FlatFile };
```

## External Types

### OnCopied

```typescript
type OnCopied = () => void;
```

### OnCopyError

```typescript
type OnCopyError = (error: unknown) => void;
```

### OnCopyClick

```typescript
type OnCopyClick = (event: MouseEvent) => void;
```

### SourceEnhancer

```typescript
type SourceEnhancer = (
  root: { data?: unknown | undefined },
  comments: {} | undefined,
  fileName: string,
) => { data?: unknown | undefined } | Promise;
```

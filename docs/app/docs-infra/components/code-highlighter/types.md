# Code Highlighter

[//]: types.ts '<-- Autogenerated By (do not edit the following markdown directly)'

## API Reference

### CodeHighlighter

**CodeHighlighter Props:**

| Prop                    | Type                                           | Default  | Description                                                                                                                 |
| :---------------------- | :--------------------------------------------- | :------- | :-------------------------------------------------------------------------------------------------------------------------- |
| name                    | `string`                                       | -        | Display name for the code example, used for identification and titles                                                       |
| Content\*               | `React.ComponentType<ContentProps<{}>>`        | -        | Component to render the code content and preview                                                                            |
| ContentLoading          | `React.ComponentType<ContentLoadingProps<{}>>` | -        | Component to show while code is being loaded or processed                                                                   |
| code                    | `Code`                                         | -        | Static code content with variants and metadata                                                                              |
| components              | `Components`                                   | -        | React components for live preview alongside code                                                                            |
| contentProps            | `{}`                                           | -        | Additional props passed to the Content component                                                                            |
| controlled              | `boolean`                                      | -        | Enable controlled mode for external code state management                                                                   |
| defaultVariant          | `string`                                       | -        | Fallback variant when the requested variant is not available                                                                |
| deferParsing            | `'none' \| 'json' \| 'gzip'`                   | `'gzip'` | Defer parsing and populating the AST into memory until the code is enhanced&#xA;Applies only in production when RSC loading |
| enhanceAfter            | `'init' \| 'stream' \| 'hydration' \| 'idle'`  | `'idle'` | When to enhance the code display with interactivity                                                                         |
| fallbackUsesAllVariants | `boolean`                                      | -        | Whether fallback content should include all variants                                                                        |
| fallbackUsesExtraFiles  | `boolean`                                      | -        | Whether fallback content should include extra files                                                                         |
| fileName                | `string`                                       | -        | Currently selected file name                                                                                                |
| forceClient             | `boolean`                                      | -        | Force client-side rendering even when server rendering is available                                                         |
| globalsCode             | `(string \| Code)[]`                           | -        | Global static code snippets to inject, typically for styling or tooling                                                     |
| highlightAfter          | `'init' \| 'stream' \| 'hydration' \| 'idle'`  | `'idle'` | When to perform syntax highlighting and code processing                                                                     |
| initialVariant          | `string`                                       | -        | Default variant to show on first load                                                                                       |
| language                | `string`                                       | -        | Language for syntax highlighting (e.g., 'tsx', 'css'). When provided, fileName is not required for parsing.                 |
| loadCodeMeta            | `LoadCodeMeta`                                 | -        | Function to load code metadata from a URL                                                                                   |
| loadSource              | `LoadSource`                                   | -        | Function to load raw source code and dependencies                                                                           |
| loadVariantMeta         | `LoadVariantMeta`                              | -        | Function to load specific variant metadata                                                                                  |
| precompute              | `Code`                                         | -        | Pre-computed code data from build-time optimization                                                                         |
| slug                    | `string`                                       | -        | URL-friendly identifier for deep linking and navigation                                                                     |
| sourceParser            | `Promise<ParseSource>`                         | -        | Promise resolving to a source parser for syntax highlighting                                                                |
| sourceTransformers      | `SourceTransformer[]`                          | -        | Array of source transformers for code processing (e.g., TypeScript to JavaScript)                                           |
| url                     | `string`                                       | -        | Source URL where the code content originates from                                                                           |
| variant                 | `string`                                       | -        | Currently selected variant name                                                                                             |
| variantType             | `string`                                       | -        | What type of variants are available (e.g., a type `packageManager` when variants `npm` and `yarn` are available)            |
| variants                | `string[]`                                     | -        | Static variant names that should be fetched at runtime                                                                      |
| children                | `string`                                       | -        | Raw code string for simple use cases                                                                                        |

### LoadCodeMeta

**Parameters:**

| Parameter | Type     | Default | Description |
| :-------- | :------- | :------ | :---------- |
| url       | `string` | -       | -           |

**Return Value:**

```tsx
type ReturnValue = Promise<Code>;
```

### LoadSource

**Parameters:**

| Parameter | Type     | Default | Description |
| :-------- | :------- | :------ | :---------- |
| url       | `string` | -       | -           |

**Return Value:**

```tsx
type ReturnValue = Promise<{
  source: string;
  extraFiles?: VariantExtraFiles;
  extraDependencies?: string[];
  externals?: Externals;
}>;
```

### LoadVariantMeta

**Parameters:**

| Parameter   | Type     | Default | Description |
| :---------- | :------- | :------ | :---------- |
| variantName | `string` | -       | -           |
| url         | `string` | -       | -           |

**Return Value:**

```tsx
type ReturnValue = Promise<VariantCode>;
```

### ParseSource

**Parameters:**

| Parameter | Type     | Default | Description |
| :-------- | :------- | :------ | :---------- |
| source    | `string` | -       | -           |
| fileName  | `string` | -       | -           |
| language? | `string` | -       | -           |

**Return Value:**

```tsx
type ReturnValue = { data?: RootData & { totalLines?: number } };
```

### TransformSource

**Parameters:**

| Parameter | Type     | Default | Description |
| :-------- | :------- | :------ | :---------- |
| source    | `string` | -       | -           |
| fileName  | `string` | -       | -           |

**Return Value:**

```tsx
type ReturnValue = Promise<Record<string, { source: string; fileName?: string }> | undefined>;
```

## Additional Types

### BaseContentLoadingProps

```typescript
type BaseContentLoadingProps = ContentLoadingVariant &
  CodeIdentityProps & { extraVariants?: Record<string, ContentLoadingVariant> };
```

### Code

```typescript
type Code = { [key: string]: string | VariantCode | undefined };
```

### CodeClientRenderingProps

Client-specific rendering props

```typescript
type CodeClientRenderingProps = {
  children: React.ReactNode;
  fallback?: React.ReactNode;
  skipFallback?: boolean;
};
```

### CodeContentProps

Core code content and variant management props

```typescript
type CodeContentProps = {
  code?: Code;
  components?: Components;
  variantType?: string;
  variants?: string[];
  variant?: string;
  fileName?: string;
  language?: string;
  initialVariant?: string;
  defaultVariant?: string;
  globalsCode?: (string | Code)[];
};
```

### CodeFunctionProps

Function props for loading and transforming code

```typescript
type CodeFunctionProps = {
  loadCodeMeta?: LoadCodeMeta;
  loadVariantMeta?: LoadVariantMeta;
  loadSource?: LoadSource;
  sourceTransformers?: SourceTransformer[];
  sourceParser?: Promise<ParseSource>;
};
```

### CodeHighlighterBaseProps

Base props containing essential properties shared across CodeHighlighter components and helper functions.
This serves as the foundation for other CodeHighlighter-related interfaces.

```typescript
type CodeHighlighterBaseProps = {
  name?: string;
  slug?: string;
  url?: string;
  code?: Code;
  components?: Components;
  variantType?: string;
  variants?: string[];
  variant?: string;
  fileName?: string;
  language?: string;
  initialVariant?: string;
  defaultVariant?: string;
  globalsCode?: (string | Code)[];
  precompute?: Code;
  fallbackUsesExtraFiles?: boolean;
  fallbackUsesAllVariants?: boolean;
  controlled?: boolean;
  children?: string;
  highlightAfter?: 'init' | 'stream' | 'hydration' | 'idle';
  enhanceAfter?: 'init' | 'stream' | 'hydration' | 'idle';
  forceClient?: boolean;
  deferParsing?: 'none' | 'json' | 'gzip';
  loadCodeMeta?: LoadCodeMeta;
  loadVariantMeta?: LoadVariantMeta;
  loadSource?: LoadSource;
  sourceTransformers?: SourceTransformer[];
  sourceParser?: Promise<ParseSource>;
  Content: React.ComponentType<ContentProps<{}>>;
  contentProps?: {};
};
```

### CodeHighlighterClientProps

Props for the client-side CodeHighlighter component.
Used when rendering happens in the browser with lazy loading and interactive features.

```typescript
type CodeHighlighterClientProps = {
  highlightAfter?: 'init' | 'hydration' | 'idle';
  enhanceAfter?: 'init' | 'hydration' | 'idle';
  name?: string;
  slug?: string;
  url?: string;
  code?: Code;
  components?: Components;
  variantType?: string;
  variants?: string[];
  variant?: string;
  fileName?: string;
  language?: string;
  initialVariant?: string;
  defaultVariant?: string;
  globalsCode?: (string | Code)[];
  fallbackUsesExtraFiles?: boolean;
  fallbackUsesAllVariants?: boolean;
  precompute?: Code;
  controlled?: boolean;
  forceClient?: boolean;
  deferParsing?: 'none' | 'json' | 'gzip';
  children: React.ReactNode;
  fallback?: React.ReactNode;
  skipFallback?: boolean;
};
```

### CodeHighlighterProps

Main props for the CodeHighlighter component.
Supports both build-time precomputation and runtime code loading with extensive customization options.
Generic type T allows for custom props to be passed to Content and ContentLoading components.

```typescript
type CodeHighlighterProps = {
  ContentLoading?: React.ComponentType<ContentLoadingProps<{}>>;
  name?: string;
  slug?: string;
  url?: string;
  code?: Code;
  components?: Components;
  variantType?: string;
  variants?: string[];
  variant?: string;
  fileName?: string;
  language?: string;
  initialVariant?: string;
  defaultVariant?: string;
  globalsCode?: (string | Code)[];
  precompute?: Code;
  fallbackUsesExtraFiles?: boolean;
  fallbackUsesAllVariants?: boolean;
  controlled?: boolean;
  children?: string;
  highlightAfter?: 'init' | 'stream' | 'hydration' | 'idle';
  enhanceAfter?: 'init' | 'stream' | 'hydration' | 'idle';
  forceClient?: boolean;
  deferParsing?: 'none' | 'json' | 'gzip';
  loadCodeMeta?: LoadCodeMeta;
  loadVariantMeta?: LoadVariantMeta;
  loadSource?: LoadSource;
  sourceTransformers?: SourceTransformer[];
  sourceParser?: Promise<ParseSource>;
  Content: React.ComponentType<ContentProps<{}>>;
  contentProps?: {};
};
```

### CodeIdentityProps

Basic identification and metadata props for code examples

```typescript
type CodeIdentityProps = { name?: string; slug?: string; url?: string };
```

### CodeLoadingProps

Loading and processing configuration props

```typescript
type CodeLoadingProps = {
  precompute?: Code;
  fallbackUsesExtraFiles?: boolean;
  fallbackUsesAllVariants?: boolean;
  controlled?: boolean;
  children?: string;
  highlightAfter?: 'init' | 'stream' | 'hydration' | 'idle';
  enhanceAfter?: 'init' | 'stream' | 'hydration' | 'idle';
  forceClient?: boolean;
  deferParsing?: 'none' | 'json' | 'gzip';
};
```

### CodeRenderingProps

Component and rendering props

```typescript
type CodeRenderingProps = { Content: React.ComponentType<ContentProps<{}>>; contentProps?: {} };
```

### Components

```typescript
type Components = { [key: string]: React.ReactNode };
```

### ContentLoadingProps

```typescript
type ContentLoadingProps = ContentLoadingVariant &
  CodeIdentityProps & { extraVariants?: Record<string, ContentLoadingVariant> } & {
    component: React.ReactNode;
    components?: Record<string, React.ReactNode>;
    initialFilename?: string;
  };
```

### ContentLoadingVariant

```typescript
type ContentLoadingVariant = {
  fileNames?: string[];
  source?: React.ReactNode;
  extraSource?: { [fileName: string]: React.ReactNode };
};
```

### ContentProps

```typescript
type ContentProps = CodeIdentityProps &
  Pick<CodeContentProps, 'code' | 'components' | 'variantType'>;
```

### ControlledCode

```typescript
type ControlledCode = { [key: string]: ControlledVariantCode | null | undefined };
```

### ControlledVariantCode

```typescript
type ControlledVariantCode = CodeMeta & {
  url?: string;
  source?: string | null;
  extraFiles?: ControlledVariantExtraFiles;
  filesOrder?: string[];
};
```

### ControlledVariantExtraFiles

```typescript
type ControlledVariantExtraFiles = { [fileName: string]: { source: string | null } };
```

### ExternalImportItem

```typescript
type ExternalImportItem = {
  name: string;
  type: 'named' | 'default' | 'namespace';
  isType?: boolean;
};
```

### Externals

```typescript
type Record = {
  [key: string]: { name: string; type: 'named' | 'default' | 'namespace'; isType?: boolean }[];
};
```

### HastRoot

```typescript
type HastRoot = { data?: RootData & { totalLines?: number } };
```

### LoadFallbackCodeOptions

Options for loading fallback code with various configuration flags

```typescript
type LoadFallbackCodeOptions = {
  shouldHighlight?: boolean;
  initialFilename?: string;
  globalsCode?: (string | Code)[];
  disableTransforms?: boolean;
  disableParsing?: boolean;
  maxDepth?: number;
  loadedFiles?: Set<string>;
  output?: 'hast' | 'hastJson' | 'hastGzip';
  loadCodeMeta?: LoadCodeMeta;
  loadVariantMeta?: LoadVariantMeta;
  loadSource?: LoadSource;
  sourceTransformers?: SourceTransformer[];
  sourceParser?: Promise<ParseSource>;
  variants?: string[];
  fallbackUsesExtraFiles?: boolean;
  fallbackUsesAllVariants?: boolean;
};
```

### LoadFileOptions

Options for controlling file loading behavior

```typescript
type LoadFileOptions = {
  disableTransforms?: boolean;
  disableParsing?: boolean;
  maxDepth?: number;
  loadedFiles?: Set<string>;
  globalsCode?: (string | VariantCode)[];
  output?: 'hast' | 'hastJson' | 'hastGzip';
};
```

### LoadVariantOptions

Options for the loadCodeVariant function, extending LoadFileOptions with required function dependencies

```typescript
type LoadVariantOptions = {
  disableTransforms?: boolean;
  disableParsing?: boolean;
  maxDepth?: number;
  loadedFiles?: Set<string>;
  globalsCode?: (string | VariantCode)[];
  output?: 'hast' | 'hastJson' | 'hastGzip';
  sourceParser?: Promise<ParseSource>;
  loadSource?: LoadSource;
  loadVariantMeta?: LoadVariantMeta;
  sourceTransformers?: SourceTransformer[];
};
```

### SourceTransformer

```typescript
type SourceTransformer = {
  extensions: string[];
  transformer: (
    source: string,
    fileName: string,
  ) => Promise<Record<string, { source: string; fileName?: string }> | undefined>;
};
```

### SourceTransformers

```typescript
type SourceTransformers = {
  extensions: string[];
  transformer: (
    source: string,
    fileName: string,
  ) => Promise<Record<string, { source: string; fileName?: string }> | undefined>;
}[];
```

### Transforms

```typescript
type Record = { [key: string]: { delta: Delta; fileName?: string } };
```

### VariantCode

Complete code variant definition with source, metadata, and configuration.
Extends CodeMeta with all the information needed to display and process a code example.

```typescript
type VariantCode = CodeMeta & {
  url?: string;
  source?: VariantSource;
  extraFiles?: VariantExtraFiles;
  metadataPrefix?: string;
  externals?: string[];
  namedExport?: string;
  filesOrder?: string[];
  transforms?: Transforms;
  allFilesListed?: boolean;
  skipTransforms?: boolean;
};
```

### VariantExtraFiles

Additional files associated with a code variant.
Can be either simple string content or objects with source and transformation options.

```typescript
type VariantExtraFiles = {
  [fileName: string]:
    | string
    | {
        source?: VariantSource;
        language?: string;
        transforms?: Transforms;
        skipTransforms?: boolean;
        metadata?: boolean;
        path?: string;
      };
};
```

### VariantSource

```typescript
type VariantSource = string | HastRoot | { hastJson: string } | { hastGzip: string };
```

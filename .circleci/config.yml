version: 2.1

parameters:
  workflow:
    description: The name of the workflow to run
    type: string
    default: pipeline
  node-version:
    description: Node.js version to use
    type: string
    default: '24.3'

orbs:
  base: .circleci/base

workflows:
  version: 2
  pipeline:
    when:
      equal: [pipeline, << pipeline.parameters.workflow >>]
    jobs:
      - base/checkout:
          context: org-global
      - base/test_lint:
          context: org-global
      - base/test_static:
          context: org-global
      - base/test_unit:
          context: org-global

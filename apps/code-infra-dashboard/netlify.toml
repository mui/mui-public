[build]
  base = "apps/code-infra-dashboard"

  # Directory (relative to root of your repo) that contains the deploy-ready
  # HTML files and assets generated by the build. If a base directory has
  # been specified, include it in the publish directory path.
  publish = "build"

  # Default build command.
  command = "pnpm build"

  # Decide when to build Netlify
  ignore = "cd ../../ && git diff --quiet $CACHED_COMMIT_REF $COMMIT_REF $(pnpm ls --filter code-infra-dashboard --parseable --only-projects) pnpm-lock.yaml"

[dev]
  command = "pnpm start"
  targetPort = 3000

[build.environment]
  NODE_VERSION = "18"
  PNPM_FLAGS = "--ignore-workspace"

[functions]
  directory = "functions"
